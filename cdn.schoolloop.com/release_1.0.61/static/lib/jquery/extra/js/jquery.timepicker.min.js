/*
 *
 *  * Copyright (c) 2004-2018, School Loop, Inc. All Rights Reserved.
 *
 */

(function(f){"object"===typeof exports&&exports&&"object"===typeof module&&module&&module.exports===exports?f(require("jquery")):"function"===typeof define&&define.amd?define(["jquery"],f):f(jQuery)})(function(f){function t(a){a=a[0];return 0<a.offsetWidth&&0<a.offsetHeight}function D(a){a.minTime&&(a.minTime=k(a.minTime));a.maxTime&&(a.maxTime=k(a.maxTime));a.durationTime&&"function"!==typeof a.durationTime&&(a.durationTime=k(a.durationTime));if("now"==a.scrollDefault)a.scrollDefault=function(){return a.roundingFunction(k(new Date),
    a)};else if(a.scrollDefault&&"function"!=typeof a.scrollDefault){var c=a.scrollDefault;a.scrollDefault=function(){return a.roundingFunction(k(c),a)}}else a.minTime&&(a.scrollDefault=function(){return a.roundingFunction(a.minTime,a)});"string"===f.type(a.timeFormat)&&a.timeFormat.match(/[gh]/)&&(a._twelveHourTime=!0);!1===a.showOnFocus&&-1!=a.showOn.indexOf("focus")&&a.showOn.splice(a.showOn.indexOf("focus"),1);if(0<a.disableTimeRanges.length){for(var b in a.disableTimeRanges)a.disableTimeRanges[b]=
    [k(a.disableTimeRanges[b][0]),k(a.disableTimeRanges[b][1])];a.disableTimeRanges=a.disableTimeRanges.sort(function(a,b){return a[0]-b[0]});for(b=a.disableTimeRanges.length-1;0<b;b--)a.disableTimeRanges[b][0]<=a.disableTimeRanges[b-1][1]&&(a.disableTimeRanges[b-1]=[Math.min(a.disableTimeRanges[b][0],a.disableTimeRanges[b-1][0]),Math.max(a.disableTimeRanges[b][1],a.disableTimeRanges[b-1][1])],a.disableTimeRanges.splice(b,1))}return a}function u(a){var c=a.data("timepicker-settings"),b=a.data("timepicker-list");
    b&&b.length&&(b.remove(),a.data("timepicker-list",!1));if(c.useSelect)var d=b=f("<select />",{"class":"ui-timepicker-select"});else b=f("<ul />",{"class":"ui-timepicker-list"}),d=f("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1}),d.css({display:"none",position:"absolute"}).append(b);if(c.noneOption)if(!0===c.noneOption&&(c.noneOption=c.useSelect?"Time...":"None"),f.isArray(c.noneOption))for(var e in c.noneOption){if(parseInt(e,10)==e){var h=E(c.noneOption[e],c.useSelect);b.append(h)}}else h=
        E(c.noneOption,c.useSelect),b.append(h);c.className&&d.addClass(c.className);null===c.minTime&&null===c.durationTime||!c.showDuration||(d.addClass("ui-timepicker-with-duration"),d.addClass("ui-timepicker-step-"+c.step));h=c.minTime;"function"===typeof c.durationTime?h=k(c.durationTime()):null!==c.durationTime&&(h=c.durationTime);e=null!==c.minTime?c.minTime:0;var g=null!==c.maxTime?c.maxTime:e+86400-1;g<e&&(g+=86400);86399===g&&"string"===f.type(c.timeFormat)&&c.show2400&&(g=86400);var m=c.disableTimeRanges,
        q=0,t=m.length,p=c.step;"function"!=typeof p&&(p=function(){return c.step});for(var u=0;e<=g;u++,e+=60*p(u)){var r=e,y=x(r,c);if(c.useSelect)var n=f("<option />",{value:y});else n=f("<li />"),n.data("time",86400>=r?r:r%86400);n.text(y);if((null!==c.minTime||null!==c.durationTime)&&c.showDuration)if(y=G(e-h,c.step),c.useSelect)n.text(n.text()+" ("+y+")");else{var w=f("<span />",{"class":"ui-timepicker-duration"});w.text(" ("+y+")");n.append(w)}q<t&&(r>=m[q][1]&&(q+=1),m[q]&&r>=m[q][0]&&r<m[q][1]&&
        (c.useSelect?n.prop("disabled",!0):n.addClass("ui-timepicker-disabled")));b.append(n)}d.data("timepicker-input",a);a.data("timepicker-list",d);c.useSelect?(a.val()&&b.val(A(k(a.val()),c)),b.on("focus",function(){f(this).data("timepicker-input").trigger("showTimepicker")}),b.on("blur",function(){f(this).data("timepicker-input").trigger("hideTimepicker")}),b.on("change",function(){v(a,f(this).val(),"select")}),v(a,b.val(),"initial"),a.hide().after(b)):(e=c.appendTo,"string"===typeof e?e=f(e):"function"===
        typeof e&&(e=e(a)),e.append(d),z(a,b),b.on("mousedown","li",function(c){a.off("focus.timepicker");a.on("focus.timepicker-ie-hack",function(){a.off("focus.timepicker-ie-hack");a.on("focus.timepicker",l.show)});B(a)||a[0].focus();b.find("li").removeClass("ui-timepicker-selected");f(this).addClass("ui-timepicker-selected");C(a)&&(a.trigger("hideTimepicker"),b.on("mouseup.timepicker","li",function(a){b.off("mouseup.timepicker");d.hide()}))}))}function E(a,c){var b,d,e;"object"==typeof a?(b=a.label,d=
    a.className,e=a.value):"string"==typeof a?b=a:f.error("Invalid noneOption value");return c?f("<option />",{value:e,"class":d,text:b}):f("<li />",{"class":d,text:b}).data("time",e)}function A(a,c){a=c.roundingFunction(a,c);if(null!==a)return x(a,c)}function p(a){sl.log("_closeHandler");a=f(a.target);0===a.closest(".ui-timepicker-input").length&&0===a.closest(".ui-timepicker-wrapper").length&&(l.hide(),f(document).unbind(".ui-timepicker"),f(window).unbind(".ui-timepicker"))}function B(a){a=a.data("timepicker-settings");
    return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&a.disableTouchKeyboard}function w(a,c,b){if(!b&&0!==b)return!1;a=a.data("timepicker-settings");var d=!1;b=a.roundingFunction(b,a);c.find("li").each(function(a,c){var g=f(c);if("number"==typeof g.data("time")&&g.data("time")==b)return d=g,!1});return d}function z(a,c){c.find("li").removeClass("ui-timepicker-selected");var b=k(m(a),a.data("timepicker-settings"));if(null!==b&&(b=w(a,c,b))){var d=b.offset().top-c.offset().top;(d+b.outerHeight()>
    c.outerHeight()||0>d)&&c.scrollTop(c.scrollTop()+b.position().top-b.outerHeight());b.addClass("ui-timepicker-selected")}}function F(a,c){if(""!==this.value&&"timepicker"!=c){var b=f(this);if(!b.is(":focus")||a&&"change"==a.type){var d=b.data("timepicker-settings"),e=k(this.value,d);if(null===e)b.trigger("timeFormatError");else{var h=!1;null!==d.minTime&&e<d.minTime?h=!0:null!==d.maxTime&&e>d.maxTime&&(h=!0);f.each(d.disableTimeRanges,function(){if(e>=this[0]&&e<this[1])return h=!0,!1});d.forceRoundTime&&
(e=d.roundingFunction(e,d));d=x(e,d);h?v(b,d,"error")&&b.trigger("timeRangeError"):v(b,d)}}}}function m(a){return a.is("input")?a.val():a.data("ui-timepicker-value")}function v(a,c,b){if(a.is("input")){a.val(c);var d=a.data("timepicker-settings");d.useSelect&&"select"!=b&&"initial"!=b&&a.data("timepicker-list").val(A(k(c),d))}if(a.data("ui-timepicker-value")!=c)return a.data("ui-timepicker-value",c),"select"==b?a.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=
    b&&a.trigger("changeTime"),!0;a.trigger("selectTime");return!1}function H(a){var c=f(this),b=c.data("timepicker-list");if(!b||!t(b))if(40==a.keyCode)l.show.call(c.get(0)),b=c.data("timepicker-list"),B(c)||c.focus();else return!0;switch(a.keyCode){case 13:return C(c)&&l.hide.apply(this),a.preventDefault(),!1;case 38:var d=b.find(".ui-timepicker-selected");d.length?d.is(":first-child")||(d.removeClass("ui-timepicker-selected"),d.prev().addClass("ui-timepicker-selected"),d.prev().position().top<d.outerHeight()&&
    b.scrollTop(b.scrollTop()-d.outerHeight())):(b.find("li").each(function(a,b){if(0<f(b).position().top)return d=f(b),!1}),d.addClass("ui-timepicker-selected"));return!1;case 40:return d=b.find(".ui-timepicker-selected"),0===d.length?(b.find("li").each(function(a,b){if(0<f(b).position().top)return d=f(b),!1}),d.addClass("ui-timepicker-selected")):d.is(":last-child")||(d.removeClass("ui-timepicker-selected"),d.next().addClass("ui-timepicker-selected"),d.next().position().top+2*d.outerHeight()>b.outerHeight()&&
    b.scrollTop(b.scrollTop()+d.outerHeight())),!1;case 27:b.find("li").removeClass("ui-timepicker-selected");l.hide();break;case 9:l.hide();break;default:return!0}}function I(a){var c=f(this),b=c.data("timepicker-list"),d=c.data("timepicker-settings");if(!b||!t(b)||d.disableTextInput)return!0;switch(a.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:d.typeaheadHighlight?
    z(c,b):b.hide()}}function C(a){var c=a.data("timepicker-settings"),b=null,d=a.data("timepicker-list").find(".ui-timepicker-selected");if(d.hasClass("ui-timepicker-disabled"))return!1;d.length&&(b=d.data("time"));null!==b&&("string"!=typeof b&&(b=x(b,c)),v(a,b,"select"));return!0}function G(a,c){a=Math.abs(a);var b=Math.round(a/60),d=[],e;60>b?d=[b,g.mins]:(e=Math.floor(b/60),b%=60,30==c&&30==b&&(e+=g.decimal+5),d.push(e),d.push(1==e?g.hr:g.hrs),30!=c&&b&&(d.push(b),d.push(g.mins)));return d.join(" ")}
    function x(a,c){if(null===a)return null;var b=new Date(J.valueOf()+1E3*a);if(isNaN(b.getTime()))return null;if("function"===f.type(c.timeFormat))return c.timeFormat(b);for(var d="",e,h=0;h<c.timeFormat.length;h++)switch(e=c.timeFormat.charAt(h),e){case "a":d+=11<b.getHours()?g.pm:g.am;break;case "A":d+=11<b.getHours()?g.PM:g.AM;break;case "g":e=b.getHours()%12;d+=0===e?"12":e;break;case "G":e=b.getHours();86400===a&&(e=24);d+=e;break;case "h":e=b.getHours()%12;0!==e&&10>e&&(e="0"+e);d+=0===e?"12":
        e;break;case "H":e=b.getHours();86400===a&&(e=24);d+=9<e?e:"0"+e;break;case "i":e=b.getMinutes();d+=9<e?e:"0"+e;break;case "s":a=b.getSeconds();d+=9<a?a:"0"+a;break;case "\\":h++;d+=c.timeFormat.charAt(h);break;default:d+=e}return d}function k(a,c){if(""===a)return null;if(!a||a+0==a)return a;if("object"==typeof a)return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds();a=a.toLowerCase().replace(/[\s\.]/g,"");if("a"==a.slice(-1)||"p"==a.slice(-1))a+="m";var b="("+g.am.replace(".","")+"|"+g.pm.replace(".",
        "")+"|"+g.AM.replace(".","")+"|"+g.PM.replace(".","")+")?",d=a.match(new RegExp("^"+b+"([0-2]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+b+"$"));if(!d)return null;var b=parseInt(1*d[2],10),e=d[1]||d[5],f=b;12>=b&&e&&(f=e==g.pm||e==g.PM,f=12==b?f?12:0:b+(f?12:0));d=3600*f+60*(1*d[3]||0)+(1*d[4]||0);12>b&&!e&&c&&c._twelveHourTime&&c.scrollDefault&&(b=d-c.scrollDefault(),0>b&&-43200<=b&&(d=(d+43200)%86400));return d}var J=new Date(1970,1,1,0,0,0),g={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",
        hr:"hr",hrs:"hrs"},l={init:function(a){return this.each(function(){var c=f(this),b=[],d;for(d in f.fn.timepicker.defaults)c.data(d)&&(b[d]=c.data(d));b=f.extend({},f.fn.timepicker.defaults,b,a);b.lang&&(g=f.extend(g,b.lang));b=D(b);c.data("timepicker-settings",b);c.addClass("ui-timepicker-input");if(b.useSelect)u(c);else{c.prop("autocomplete","off");if(b.showOn)for(var e in b.showOn)c.on(b.showOn[e]+".timepicker",l.show);c.on("change.timepicker",F);c.on("keydown.timepicker",H);c.on("keyup.timepicker",
        I);if(b.disableTextInput)c.on("keypress.timepicker",function(a){a.preventDefault()});F.call(c.get(0))}})},show:function(a){var c=f(this),b=c.data("timepicker-settings");a&&a.preventDefault();if(b.useSelect)c.data("timepicker-list").focus();else if(B(c)&&c.blur(),a=c.data("timepicker-list"),!c.prop("readonly")&&(a&&0!==a.length&&"function"!==typeof b.durationTime||(u(c),a=c.data("timepicker-list")),!t(a))){c.data("ui-timepicker-value",c.val());z(c,a);l.hide();a.show();var d={};b.orientation.match(/r/)?
        d.left=c.offset().left+c.outerWidth()-a.outerWidth()+parseInt(a.css("marginLeft").replace("px",""),10):d.left=c.offset().left+parseInt(a.css("marginLeft").replace("px",""),10);"t"==(b.orientation.match(/t/)?"t":b.orientation.match(/b/)?"b":c.offset().top+c.outerHeight(!0)+a.outerHeight()>f(window).height()+f(window).scrollTop()?"t":"b")?(a.addClass("ui-timepicker-positioned-top"),d.top=c.offset().top-a.outerHeight()+parseInt(a.css("marginTop").replace("px",""),10)):(a.removeClass("ui-timepicker-positioned-top"),
        d.top=c.offset().top+c.outerHeight()+parseInt(a.css("marginTop").replace("px",""),10));a.offset(d);d=a.find(".ui-timepicker-selected");d.length||(m(c)?d=w(c,a,k(m(c))):b.scrollDefault&&(d=w(c,a,b.scrollDefault())));d&&d.length?(d=a.scrollTop()+d.position().top-d.outerHeight(),a.scrollTop(d)):a.scrollTop(0);if(b.stopScrollPropagation)f(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(a){a.preventDefault();var b=f(this).scrollTop();f(this).scrollTop(b+a.originalEvent.deltaY)});f(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",
        p);f(window).on("resize.ui-timepicker",p);if(b.closeOnWindowScroll)f(document).on("scroll.ui-timepicker",p);f(window).on("resize.ui-timepicker",p);f(".ui-timepicker-list").on("click.ui-timepicker",function(a){a.stopPropagation()});c.trigger("showTimepicker");return this}},hide:function(a){a=f(this);var c=a.data("timepicker-settings");c&&c.useSelect&&a.blur();f(".ui-timepicker-wrapper").each(function(){var a=f(this);if(t(a)){var c=a.data("timepicker-input"),e=c.data("timepicker-settings");e&&e.selectOnBlur&&
    C(c);a.hide();c.trigger("hideTimepicker")}});return this},option:function(a,c){return this.each(function(){var b=f(this),d=b.data("timepicker-settings"),e=b.data("timepicker-list");if("object"==typeof a)d=f.extend(d,a);else if("string"==typeof a&&"undefined"!=typeof c)d[a]=c;else if("string"==typeof a)return d[a];d=D(d);b.data("timepicker-settings",d);e&&(e.remove(),b.data("timepicker-list",!1));d.useSelect&&u(b)})},getSecondsFromMidnight:function(){return k(m(this))},getTime:function(a){var c=m(this);
        if(!c)return null;c=k(c);if(null===c)return null;a||(a=new Date);a=new Date(a);a.setHours(c/3600);a.setMinutes(c%3600/60);a.setSeconds(c%60);a.setMilliseconds(0);return a},setTime:function(a){var c=this.data("timepicker-settings"),b=c.forceRoundTime?A(k(a),c):x(k(a),c);a&&null===b&&c.noneOption&&(b=a);v(this,b);this.data("timepicker-list")&&z(this,this.data("timepicker-list"));return this},remove:function(){if(this.hasClass("ui-timepicker-input")){var a=this.data("timepicker-settings");this.removeAttr("autocomplete",
        "off");this.removeClass("ui-timepicker-input");this.removeData("timepicker-settings");this.off(".timepicker");this.data("timepicker-list")&&this.data("timepicker-list").remove();a.useSelect&&this.show();this.removeData("timepicker-list");return this}}};f.fn.timepicker=function(a){if(!this.length)return this;if(l[a])return this.hasClass("ui-timepicker-input")?l[a].apply(this,Array.prototype.slice.call(arguments,1)):this;if("object"!==typeof a&&a)f.error("Method "+a+" does not exist on jQuery.timepicker");
    else return l.init.apply(this,arguments)};f.fn.timepicker.defaults={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,showOnFocus:!0,showOn:["click","focus"],timeFormat:"g:ia",scrollDefault:null,selectOnBlur:!1,disableTextInput:!1,disableTouchKeyboard:!1,forceRoundTime:!1,roundingFunction:function(a,c){if(null===a)return null;var b=a%(60*c.step);return a=b>=30*c.step?a+(60*c.step-b):a-b},appendTo:"body",orientation:"l",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,
        noneOption:!1,show2400:!1,stopScrollPropagation:!1}});